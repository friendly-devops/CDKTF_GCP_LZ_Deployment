"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.isRegistryModule = void 0;
// Copyright (c) HashiCorp, Inc
// SPDX-License-Identifier: MPL-2.0
const is_valid_domain_1 = __importDefault(require("is-valid-domain"));
// Logic from https://github.com/hashicorp/terraform/blob/e09b831f6ee35d37b11b8dcccd3a6d6f6db5e5ff/internal/addrs/module_source.go#L198
function isRegistryModule(source) {
    const parts = source.split("/");
    if (source.startsWith(".") ||
        parts.length < 3 ||
        parts.length > 4 ||
        source.includes("github.com") ||
        source.includes("bitbucket.org")) {
        return false;
    }
    if (parts.length === 4 && !(0, is_valid_domain_1.default)(parts[0])) {
        return false;
    }
    return true;
}
exports.isRegistryModule = isRegistryModule;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVycmFmb3JtLW1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRlcnJhZm9ybS1tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsK0JBQStCO0FBQy9CLG1DQUFtQztBQUNuQyxzRUFBNEM7QUFFNUMsdUlBQXVJO0FBQ3ZJLFNBQWdCLGdCQUFnQixDQUFDLE1BQWM7SUFDN0MsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNoQyxJQUNFLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDO1FBQ3RCLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQztRQUNoQixLQUFLLENBQUMsTUFBTSxHQUFHLENBQUM7UUFDaEIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUM7UUFDN0IsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsRUFDaEM7UUFDQSxPQUFPLEtBQUssQ0FBQztLQUNkO0lBRUQsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUEseUJBQWEsRUFBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUNsRCxPQUFPLEtBQUssQ0FBQztLQUNkO0lBRUQsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBakJELDRDQWlCQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgSGFzaGlDb3JwLCBJbmNcbi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNUEwtMi4wXG5pbXBvcnQgaXNWYWxpZERvbWFpbiBmcm9tIFwiaXMtdmFsaWQtZG9tYWluXCI7XG5cbi8vIExvZ2ljIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2hhc2hpY29ycC90ZXJyYWZvcm0vYmxvYi9lMDliODMxZjZlZTM1ZDM3YjExYjhkY2NjZDNhNmQ2ZjZkYjVlNWZmL2ludGVybmFsL2FkZHJzL21vZHVsZV9zb3VyY2UuZ28jTDE5OFxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVnaXN0cnlNb2R1bGUoc291cmNlOiBzdHJpbmcpIHtcbiAgY29uc3QgcGFydHMgPSBzb3VyY2Uuc3BsaXQoXCIvXCIpO1xuICBpZiAoXG4gICAgc291cmNlLnN0YXJ0c1dpdGgoXCIuXCIpIHx8XG4gICAgcGFydHMubGVuZ3RoIDwgMyB8fFxuICAgIHBhcnRzLmxlbmd0aCA+IDQgfHxcbiAgICBzb3VyY2UuaW5jbHVkZXMoXCJnaXRodWIuY29tXCIpIHx8XG4gICAgc291cmNlLmluY2x1ZGVzKFwiYml0YnVja2V0Lm9yZ1wiKVxuICApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAocGFydHMubGVuZ3RoID09PSA0ICYmICFpc1ZhbGlkRG9tYWluKHBhcnRzWzBdKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuIl19