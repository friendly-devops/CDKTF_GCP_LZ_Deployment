"use strict";
/**
 * Copyright (c) HashiCorp, Inc.
 * SPDX-License-Identifier: MPL-2.0
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.ConstructsMakerProviderTarget = exports.ConstructsMakerModuleTarget = exports.ConstructsMakerTarget = void 0;
const config_1 = require("./config");
class ConstructsMakerTarget {
    constructor(constraint, targetLanguage) {
        this.constraint = constraint;
        this.targetLanguage = targetLanguage;
        if (this.constraint instanceof config_1.TerraformModuleConstraint) {
            this.fileName = `${this.typesPath(this.constraint.fileName)}.ts`;
        }
        else {
            this.fileName = `${this.typesPath(this.constraint.name)}.ts`;
        }
    }
    static from(constraint, targetLanguage) {
        if (constraint instanceof config_1.TerraformModuleConstraint) {
            return new ConstructsMakerModuleTarget(constraint, targetLanguage);
        }
        else {
            return new ConstructsMakerProviderTarget(constraint, targetLanguage);
        }
    }
    get version() {
        return this.constraint.version;
    }
    get source() {
        return this.constraint.source;
    }
    get name() {
        return this.constraint.name;
    }
    get fqn() {
        return this.constraint.fqn;
    }
    get namespace() {
        return this.constraint.namespace;
    }
    get moduleKey() {
        return this.fqn.replace(/\//gi, "_");
    }
}
exports.ConstructsMakerTarget = ConstructsMakerTarget;
class ConstructsMakerModuleTarget extends ConstructsMakerTarget {
    get isModule() {
        return true;
    }
    get isProvider() {
        return false;
    }
    get srcMakName() {
        switch (this.targetLanguage) {
            case config_1.Language.GO:
                return this.name.replace(/-/gi, "_");
            case config_1.Language.JAVA:
            case config_1.Language.CSHARP:
            case config_1.Language.PYTHON:
                return this.simplifiedFqn;
            default:
                return this.simplifiedName;
        }
    }
    get trackingPayload() {
        return {
            name: this.name,
            fullName: this.fqn,
            version: this.version,
            type: "module",
        };
    }
    typesPath(name) {
        return `modules/${name}`;
    }
    get simplifiedName() {
        var _a, _b;
        return ((_b = (_a = this.namespace) === null || _a === void 0 ? void 0 : _a.replace(/\//gi, ".").replace(/-/gi, "_")) !== null && _b !== void 0 ? _b : this.name);
    }
    get simplifiedFqn() {
        return this.fqn.replace(/\//gi, ".").replace(/-/gi, "_");
    }
}
exports.ConstructsMakerModuleTarget = ConstructsMakerModuleTarget;
class ConstructsMakerProviderTarget extends ConstructsMakerTarget {
    get isModule() {
        return false;
    }
    get isProvider() {
        return true;
    }
    get srcMakName() {
        switch (this.targetLanguage) {
            case config_1.Language.JAVA:
                // "null" is a reserved keyword and can't be used as a package name
                return this.isNullProvider ? "nullprovider" : this.simplifiedName;
            case config_1.Language.CSHARP:
                // "null" is a reserved keyword and can't be used as a namespace
                return this.isNullProvider ? "Providers.Null" : this.simplifiedName;
            case config_1.Language.PYTHON:
                return this.simplifiedName;
            case config_1.Language.GO:
                return this.name.replace(/-/gi, "_");
            default:
                return this.constraint.fqn;
        }
    }
    get trackingPayload() {
        return {
            name: this.name,
            fullName: this.source,
            version: this.version,
            type: "provider",
        };
    }
    typesPath(name) {
        return `providers/${name}/index`;
    }
    get isNullProvider() {
        return this.constraint.name === "null";
    }
    get simplifiedName() {
        return this.name.replace(/\//gi, ".").replace(/-/gi, "_");
    }
}
exports.ConstructsMakerProviderTarget = ConstructsMakerProviderTarget;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uc3RydWN0LW1ha2VyLXRhcmdldC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNvbnN0cnVjdC1tYWtlci10YXJnZXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7O0FBRUgscUNBSWtCO0FBSWxCLE1BQXNCLHFCQUFxQjtJQUd6QyxZQUNrQixVQUF5QyxFQUN6QyxjQUF3QjtRQUR4QixlQUFVLEdBQVYsVUFBVSxDQUErQjtRQUN6QyxtQkFBYyxHQUFkLGNBQWMsQ0FBVTtRQUV4QyxJQUFJLElBQUksQ0FBQyxVQUFVLFlBQVksa0NBQXlCLEVBQUU7WUFDeEQsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1NBQ2xFO2FBQU07WUFDTCxJQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7U0FDOUQ7SUFDSCxDQUFDO0lBRU0sTUFBTSxDQUFDLElBQUksQ0FDaEIsVUFBeUMsRUFDekMsY0FBd0I7UUFFeEIsSUFBSSxVQUFVLFlBQVksa0NBQXlCLEVBQUU7WUFDbkQsT0FBTyxJQUFJLDJCQUEyQixDQUFDLFVBQVUsRUFBRSxjQUFjLENBQUMsQ0FBQztTQUNwRTthQUFNO1lBQ0wsT0FBTyxJQUFJLDZCQUE2QixDQUFDLFVBQVUsRUFBRSxjQUFjLENBQUMsQ0FBQztTQUN0RTtJQUNILENBQUM7SUFFRCxJQUFXLE9BQU87UUFDaEIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQztJQUNqQyxDQUFDO0lBRUQsSUFBVyxNQUFNO1FBQ2YsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQztJQUNoQyxDQUFDO0lBRUQsSUFBVyxJQUFJO1FBQ2IsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUks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Z0JBQ0UsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQztTQUM5QjtJQUNILENBQUM7SUFFRCxJQUFXLGVBQWU7UUFDeEIsT0FBTztZQUNMLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtZQUNmLFFBQVEsRUFBRSxJQUFJLENBQUMsTUFBTTtZQUNyQixPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87WUFDckIsSUFBSSxFQUFFLFVBQVU7U0FDakIsQ0FBQztJQUNKLENBQUM7SUFFUyxTQUFTLENBQUMsSUFBWTtRQUM5QixPQUFPLGFBQWEsSUFBSSxRQUFRLENBQUM7SUFDbkMsQ0FBQztJQUVELElBQVksY0FBYztRQUN4QixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxLQUFLLE1BQU0sQ0FBQztJQUN6QyxDQUFDO0lBRUQsSUFBYyxjQUFjO1FBQzFCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDNUQsQ0FBQztDQUNGO0FBaERELHNFQWdEQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBIYXNoaUNvcnAsIEluYy5cbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNUEwtMi4wXG4gKi9cblxuaW1wb3J0IHtcbiAgTGFuZ3VhZ2UsXG4gIFRlcnJhZm9ybURlcGVuZGVuY3lDb25zdHJhaW50LFxuICBUZXJyYWZvcm1Nb2R1bGVDb25zdHJhaW50LFxufSBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCB7IE1vZHVsZVNjaGVtYSB9IGZyb20gXCIuL21vZHVsZS1zY2hlbWFcIjtcbmltcG9ydCB7IFByb3ZpZGVyU2NoZW1hIH0gZnJvbSBcIi4vcHJvdmlkZXItc2NoZW1hXCI7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb25zdHJ1Y3RzTWFrZXJUYXJnZXQge1xuICBwdWJsaWMgcmVhZG9ubHkgZmlsZU5hbWU6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgY29uc3RyYWludDogVGVycmFmb3JtRGVwZW5kZW5jeUNvbnN0cmFpbnQsXG4gICAgcHVibGljIHJlYWRvbmx5IHRhcmdldExhbmd1YWdlOiBMYW5ndWFnZVxuICApIHtcbiAgICBpZiAodGhpcy5jb25zdHJhaW50IGluc3RhbmNlb2YgVGVycmFmb3JtTW9kdWxlQ29uc3RyYWludCkge1xuICAgICAgdGhpcy5maWxlTmFtZSA9IGAke3RoaXMudHlwZXNQYXRoKHRoaXMuY29uc3RyYWludC5maWxlTmFtZSl9LnRzYDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWxlTmFtZSA9IGAke3RoaXMudHlwZXNQYXRoKHRoaXMuY29uc3RyYWludC5uYW1lKX0udHNgO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZnJvbShcbiAgICBjb25zdHJhaW50OiBUZXJyYWZvcm1EZXBlbmRlbmN5Q29uc3RyYWludCxcbiAgICB0YXJnZXRMYW5ndWFnZTogTGFuZ3VhZ2VcbiAgKSB7XG4gICAgaWYgKGNvbnN0cmFpbnQgaW5zdGFuY2VvZiBUZXJyYWZvcm1Nb2R1bGVDb25zdHJhaW50KSB7XG4gICAgICByZXR1cm4gbmV3IENvbnN0cnVjdHNNYWtlck1vZHVsZVRhcmdldChjb25zdHJhaW50LCB0YXJnZXRMYW5ndWFnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0c01ha2VyUHJvdmlkZXJUYXJnZXQoY29uc3RyYWludCwgdGFyZ2V0TGFuZ3VhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQgdmVyc2lvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50LnZlcnNpb247XG4gIH1cblxuICBwdWJsaWMgZ2V0IHNvdXJjZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50LnNvdXJjZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50Lm5hbWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGZxbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50LmZxbjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbmFtZXNwYWNlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnQubmFtZXNwYWNlO1xuICB9XG5cbiAgcHVibGljIGdldCBtb2R1bGVLZXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZnFuLnJlcGxhY2UoL1xcLy9naSwgXCJfXCIpO1xuICB9XG5cbiAgcHVibGljIGFic3RyYWN0IGdldCBzcmNNYWtOYW1lKCk6IHN0cmluZztcbiAgcHVibGljIGFic3RyYWN0IGdldCBpc01vZHVsZSgpOiBib29sZWFuO1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0IGlzUHJvdmlkZXIoKTogYm9vbGVhbjtcbiAgcHVibGljIGFic3RyYWN0IGdldCB0cmFja2luZ1BheWxvYWQoKTogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGdldCBzaW1wbGlmaWVkTmFtZSgpOiBzdHJpbmc7XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHR5cGVzUGF0aChuYW1lOiBzdHJpbmcpOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBDb25zdHJ1Y3RzTWFrZXJNb2R1bGVUYXJnZXQgZXh0ZW5kcyBDb25zdHJ1Y3RzTWFrZXJUYXJnZXQge1xuICBwdWJsaWMgc3BlYz86IE1vZHVsZVNjaGVtYTtcblxuICBwdWJsaWMgZ2V0IGlzTW9kdWxlKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGdldCBpc1Byb3ZpZGVyKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgc3JjTWFrTmFtZSgpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodGhpcy50YXJnZXRMYW5ndWFnZSkge1xuICAgICAgY2FzZSBMYW5ndWFnZS5HTzpcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZS5yZXBsYWNlKC8tL2dpLCBcIl9cIik7XG4gICAgICBjYXNlIExhbmd1YWdlLkpBVkE6XG4gICAgICBjYXNlIExhbmd1YWdlLkNTSEFSUDpcbiAgICAgIGNhc2UgTGFuZ3VhZ2UuUFlUSE9OOlxuICAgICAgICByZXR1cm4gdGhpcy5zaW1wbGlmaWVkRnFuO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMuc2ltcGxpZmllZE5hbWU7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldCB0cmFja2luZ1BheWxvYWQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgIGZ1bGxOYW1lOiB0aGlzLmZxbixcbiAgICAgIHZlcnNpb246IHRoaXMudmVyc2lvbixcbiAgICAgIHR5cGU6IFwibW9kdWxlXCIsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCB0eXBlc1BhdGgobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYG1vZHVsZXMvJHtuYW1lfWA7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IHNpbXBsaWZpZWROYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubmFtZXNwYWNlPy5yZXBsYWNlKC9cXC8vZ2ksIFwiLlwiKS5yZXBsYWNlKC8tL2dpLCBcIl9cIikgPz8gdGhpcy5uYW1lXG4gICAgKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgc2ltcGxpZmllZEZxbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmZxbi5yZXBsYWNlKC9cXC8vZ2ksIFwiLlwiKS5yZXBsYWNlKC8tL2dpLCBcIl9cIik7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvbnN0cnVjdHNNYWtlclByb3ZpZGVyVGFyZ2V0IGV4dGVuZHMgQ29uc3RydWN0c01ha2VyVGFyZ2V0IHtcbiAgcHVibGljIHNwZWM/OiBQcm92aWRlclNjaGVtYTtcblxuICBwdWJsaWMgZ2V0IGlzTW9kdWxlKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaXNQcm92aWRlcigpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgc3JjTWFrTmFtZSgpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodGhpcy50YXJnZXRMYW5ndWFnZSkge1xuICAgICAgY2FzZSBMYW5ndWFnZS5KQVZBOlxuICAgICAgICAvLyBcIm51bGxcIiBpcyBhIHJlc2VydmVkIGtleXdvcmQgYW5kIGNhbid0IGJlIHVzZWQgYXMgYSBwYWNrYWdlIG5hbWVcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNOdWxsUHJvdmlkZXIgPyBcIm51bGxwcm92aWRlclwiIDogdGhpcy5zaW1wbGlmaWVkTmFtZTtcbiAgICAgIGNhc2UgTGFuZ3VhZ2UuQ1NIQVJQOlxuICAgICAgICAvLyBcIm51bGxcIiBpcyBhIHJlc2VydmVkIGtleXdvcmQgYW5kIGNhbid0IGJlIHVzZWQgYXMgYSBuYW1lc3BhY2VcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNOdWxsUHJvdmlkZXIgPyBcIlByb3ZpZGVycy5OdWxsXCIgOiB0aGlzLnNpbXBsaWZpZWROYW1lO1xuICAgICAgY2FzZSBMYW5ndWFnZS5QWVRIT046XG4gICAgICAgIHJldHVybiB0aGlzLnNpbXBsaWZpZWROYW1lO1xuICAgICAgY2FzZSBMYW5ndWFnZS5HTzpcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZS5yZXBsYWNlKC8tL2dpLCBcIl9cIik7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50LmZxbjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IHRyYWNraW5nUGF5bG9hZCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgZnVsbE5hbWU6IHRoaXMuc291cmNlLFxuICAgICAgdmVyc2lvbjogdGhpcy52ZXJzaW9uLFxuICAgICAgdHlwZTogXCJwcm92aWRlclwiLFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgdHlwZXNQYXRoKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBwcm92aWRlcnMvJHtuYW1lfS9pbmRleGA7XG4gIH1cblxuICBwcml2YXRlIGdldCBpc051bGxQcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50Lm5hbWUgPT09IFwibnVsbFwiO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBzaW1wbGlmaWVkTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm5hbWUucmVwbGFjZSgvXFwvL2dpLCBcIi5cIikucmVwbGFjZSgvLS9naSwgXCJfXCIpO1xuICB9XG59XG4iXX0=